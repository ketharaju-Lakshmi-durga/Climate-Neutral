<!DOCTYPE html>
<html lang="en">

<head>
    <title>Climate Neutral :: Index</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
</head>
<header>
    <nav>
        <h1>Climate<span>Neutral</span></h1>
    </nav>
</header>


<body>
    
    
    <div id="wrapper">
        <form id="fleetForm">
            <label for="input-file" id="drop-area">
                <input type="file" accept="file/*" id="input-file" hidden>
                <div id="img-view">
                    <img src="static/image/upload_icon.png">
                    <p>Drag and drop or click here to upload files</p>
                    <span>Upload .csv format file</span>
                </div>
            </label>
            <div class="two-fields">
                <div><label for="Province">Province</label>
                    <select id="Province" name="Province">
                        <option value="Alberta">Alberta</option>
                        <option value="British Columbia">British Columbia</option>
                        <option value="Ontario">Ontario</option>
                        <option value="New Foundland & Labrador">New Foundland & Labrador</option>
                        <option value="Prince Edaward Island">Prince Edaward Island</option>
                        <option value="Nova Scotia">Nova Scotia</option>
                        <option value="New Brunswick">New Brunswick</option>
                        <option value="Quebec">Quebec</option>
                        <option value="Manitoba">Manitoba</option>
                        <option value="Saskatchewan">Saskatchewan</option>
                    </select>
                </div>
                <div>
                    <label for="vehicleDescription">Vehicle Description</label>
                    <input type="text" id="vehicleDescription" name="vehicleDescription">
                </div>
            </div>
            <div class="three-fields">
                <div>
                    <label for="vehicleType">Vehicle Type</label>
                    <select id="vehicleType" name="vehicleType" aria-placeholder="Vehicle type">
                        <option value="LightDutyTruck">Light Duty Truck</option>
                        <option value="Car">Car</option>
                    </select>
                </div>

                <div><label for="Year">Year</label>
                    <input type="number" id="year" name="year" min="1900" max="2100" placeholder="YYYY" required>
                </div>

                <div>
                    <label for="make">Make</label>
                    <input type="text" id="make" name="make">

                </div>
            </div>
            <div class="three-fields">
                <div>
                    <label for="model">Model</label>
                    <input type="text" id="model" name="model">

                </div>
                <div>
                    <label for="annual_vkt">Annual VKT</label>
                    <input type="number" id="annual_vkt" name="annual_vkt">

                </div>
                <div>
                    <label for="annual_fuel">Annual Fuel</label>
                    <input type="number" id="annual_fuel" name="annual_fuel">
                </div>
            </div>

            <div class="two-fields">
                <div>
                    <label for="fuelType">Fuel Type</label>
                    <select id="fuelType" name="fuelType" aria-placeholder="Fuel type">
                        <option value="Gasoline">Gasoline</option>
                        <option value="E10 Gasoline">E10 Gasoline</option>
                        <option value="Diesel">Diesel</option>
                    </select>
                </div>

                <div>
                    <label for="flex_fuel">Flex Fuel</label>
                    <select name="flex_fuel" id="flex_fuel">
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>
            </div>

            <div><label for="vehicleQuantity">Vehicle Quantity</label>
                <input type="number" id="vehicleQuantity" name="vehicleQuantity">
            </div>

            <!-- Add button for adding entries to a table -->

        </form>
        <button type="button" onclick="addEntry()">ADD</button>
        <input type="button" value="Reset" onclick="resetForm()">
        <!-- Display table for selected entries -->
        <table id="entryTable" border="1">
            <thead>
                <tr>
                    <th>Description</th>
                    <th>Vehicle Type</th>
                    <th>Year</th>
                    <th>Make</th>
                    <th>Model</th>
                    <th>Annual VKT</th>
                    <th>Annual Fuel</th>
                    <th>Fuel Type</th>
                    <th>Flex Fuel</th>
                    <th>Vehicle Quantity</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="entryTableBody"></tbody>
        </table>
        <br>

        <!-- Move the submit button below the table -->
        <button type="button" onclick="submitForm()">Submit</button>
    </div>
    <footer>
        <p>&copy; 2024 Climate Neutral. All rights reserved.</p>
        <!-- Add any other footer content here -->
    </footer>
    <script>

        function addEntry() {
            var vehicleDescription = document.getElementById('vehicleDescription').value;
            var vehicleType = document.getElementById('vehicleType').value;
            var year = document.getElementById('year').value;
            var make = document.getElementById('make').value;
            var model = document.getElementById('model').value;
            var annualVKT = document.getElementById('annual_vkt').value;
            var annualFuel = document.getElementById('annual_fuel').value;
            var vehicleQuantity = document.getElementById('vehicleQuantity').value;
            var flexfuel = document.getElementById('flex_fuel').value;
            var fuelType = document.getElementById('fuelType').value;
            var Province = document.getElementById('Province').value;
            
            // https://www.youtube.com/watch?v=5Fws9daTtIs&t=168s
            // const dropArea = document.getElementById('drop-area');
            // const inpuFile = document.getElementById('inpt-file');
            // const imageiew = document.getElementById(img - view);

            // inputFile.addEventListener('change', (e) => {
            //     if (inputFile.files.length) {
            //         const reader = new FileReader();
            //         reader.onload = (e) => {
            //             const file = e.target.result;
            //             imageiew.innerHTML = `<img src="${file}" alt="">`;
            //         };
            //         reader.readAsDataURL(inputFile.files[0]);
            //     }
            // });

            // Create a new row for the table
            var newRow = document.createElement('tr');

            // Populate the row with data
            newRow.innerHTML = `
                <td>${vehicleDescription}</td>
                <td>${vehicleType}</td>
                <td>${year}</td>
                <td>${make}</td>
                <td>${model}</td>
                <td>${annualVKT}</td>
                <td>${annualFuel}</td>
                <td>${fuelType}</td>
                <td>${flexfuel}</td>
                <td>${vehicleQuantity}</td>
                <td style="white-space: nowrap;">
                    <button onclick="editRow(this)" style="display: inline-block;">Edit</button>
                    <button onclick="deleteRow(this)" style="display: inline-block;">Delete</button>
                </td>
            `;

            // Append the row to the table body
            document.getElementById('entryTableBody').appendChild(newRow);

            // Reset the form fields to default values
            document.getElementById('Province').value = '';
            document.getElementById('vehicleDescription').value = '';
            document.getElementById('vehicleType').value = 'Light Duty Truck';
            document.getElementById('year').value = '';
            document.getElementById('make').value = '';
            document.getElementById('model').value = '';
            document.getElementById('annual_vkt').value = '';
            document.getElementById('vehicleQuantity').value = '';
            document.getElementById('flex_fuel').value = 'Yes';
            document.getElementById('annual_fuel').value = '';
        }
        //begins here


        function submitForm() {
            // Collect data from the table
            var tableRows = document.getElementById('entryTableBody').getElementsByTagName('tr');
            var formData = [];

            for (var i = 0; i < tableRows.length; i++) {
                var cells = tableRows[i].getElementsByTagName('td');
                var rowData = {
                    Description: cells[0].innerText,
                    VehicleType: cells[1].innerText,
                    Year: cells[2].innerText,
                    Make: cells[3].innerText,
                    Model: cells[4].innerText,
                    AnnualVKT: cells[5].innerText,
                    AnnualFuel: cells[6].innerText,
                    FuelType: cells[7].innerText,
                    FlexFuel: cells[8].innerText,
                    VehicleQuantity: cells[9].innerText,

                };

                formData.push(rowData);
            }

            // Store the form data in localStorage
            localStorage.setItem('formData', JSON.stringify(formData));

            // Redirect to another page (e.g., green_wizard.html)
            window.location.href = 'green_wizard.html';

        }
        function resetForm() {
            document.getElementById("fleetForm").reset();
        }
        function editRow(button) {
            let row = button.parentNode.parentNode;
        console.log(row)
            let description=row.cells[0].innerText;
            let vehicleType=row.cells[1].innerText;
            let year=row.cells[2].innerText;
            let make=row.cells[3].innerText;
            let model=row.cells[4].innerText;
            let annualVKT=row.cells[5].innerText;
            let annualFuel=row.cells[6].innerText;
            let fuelType=row.cells[7].innerText;
            let  flexFuel=row.cells[8].innerText;
            let vehicleQuantity= row.cells[9].innerText;
            
            
            let province =  document.getElementById('Province').innerText;

            

            document.getElementById('Province').value=province;
            document.getElementById('vehicleDescription').value = description;
            document.getElementById('vehicleType').value = vehicleType;
            document.getElementById('year').value = year;
            document.getElementById('make').value = make;
            document.getElementById('model').value = model;
            document.getElementById('annual_vkt').value = annualVKT;
            document.getElementById('vehicleQuantity').value = vehicleQuantity;
            document.getElementById('flex_fuel').value = flexFuel;
            document.getElementById('annual_fuel').value = annualFuel;
            document.getElementById('Province').value=province;
            row.remove();
        }
        

        function deleteRow(button) {
            let row = button.parentNode.parentNode;
            row.remove();
        }

    </script>
</body>

</html>